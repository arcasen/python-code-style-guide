### 类型注解代码 

您可以使用类型提示（type hints）^[<https://docs.python.org/3/library/typing.html>]注解 Python 代码。在构建时使用类型检查工具如 pytype^[<https://github.com/google/pytype>] 对代码进行类型检查。在大多数情况下，当可行时，类型注解在源文件中。对于第三方或扩展模块，注解可以在存根 `.pyi` 文件^[<https://peps.python.org/pep-0484/#stub-files>]中。

#### 定义 

类型注解（或“类型提示”）用于函数或方法参数和返回值：

```python
def func(a: int) -> list[int]:
```

您也可以使用类似语法声明变量的类型：

```python
a: SomeType = some_func()
```

#### 优点 

类型注解提高了代码的可读性和可维护性。类型检查器可以捕获许多运行时错误，而无需编写单元测试。

#### 缺点 

您必须保持类型注解最新。类型检查可能会减慢您的代码（尽管 pytype 有增量检查）。您的团队可能尚未习惯它们。

#### 决定 

强烈建议在更新代码时启用 Python 类型分析。在添加或修改公共 API 时，请包含类型注解，并在构建系统中启用通过 pytype 进行检查。由于静态分析在 Python 中相对较新，我们认识到一些不必要的副作用（例如错误推断的类型）可能会阻碍某些项目采用类型注解。在这些情况下，鼓励作者在 BUILD 文件或代码本身中添加注释，包含 TODO 或指向描述当前阻止类型注解采用的问题的 bug 链接。
