### 线程 

不要依赖内置类型的原子性。

虽然 Python 的内置数据类型如字典似乎具有原子操作，但存在角案例，它们不是原子性的（例如，如果 `__hash__` 或 `__eq__` 实现为 Python 方法），并且不应依赖它们的原子性。也不应依赖原子变量赋值（因为这反过来依赖字典）。

使用 `queue` 模块的 `Queue` 数据类型作为线程之间通信数据的首选方式。否则，使用 `threading` 模块及其锁原语。优先使用条件变量和 `threading.Condition` 而非使用低级锁。
